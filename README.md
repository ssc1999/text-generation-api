# 🌟 Text Generation API

Welcome to the **Text Generation API**, a FastAPI-powered application that leverages GPT-2 to generate human-like text based on a given prompt. This project includes endpoints for generating text and viewing a history of generated results, all stored in a lightweight SQLite database.

---

## 🚀 Features

- **Generate Text:** Use the `/generate` endpoint to create coherent text based on your input prompt.
- **View History:** Keep track of previous prompts and their generated responses via the `/history` endpoint.
- **Fast & Scalable:** Built with FastAPI, making it production-ready and extremely fast.
- **Lightweight Database:** Persistent history storage using SQLite.
- **Customizable Parameters:** Configure generation parameters like `max_length`, `temperature`, and `top_p`.

---

## 🛠️ Project Structure

```plaintext
text-generation-api/
├── app/
│   ├── __init__.py          # Makes app a module
│   ├── main.py              # API routes and application logic
│   ├── schemas.py           # Request and response validation schemas
│   ├── models.py            # GPT-2 model loading and setup
│   ├── database.py          # SQLite database initialization and queries
│
├── history.db               # SQLite database file (auto-generated)
├── requirements.txt         # Python dependencies
└── README.md                # Project documentation
```

---

## 📦 Installation

### Prerequisites

- Python 3.10 or newer
- pip (Python's package installer)

### Steps

1. Clone the repository:

   ```bash
   git clone https://github.com/your-username/text-generation-api.git
   cd text-generation-api
   ```

2. Create a virtual environment:

   ```bash
   python -m venv myenv
   source myenv/bin/activate  # On Windows: myenv\Scripts\activate
   ```

3. Install dependencies:

   ```bash
   pip install -r requirements.txt
   ```

4. Start the application:

   ```bash
   uvicorn app.main:app --reload
   ```

5. Visit the API documentation:

   - Swagger UI: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)
   - ReDoc: [http://127.0.0.1:8000/redoc](http://127.0.0.1:8000/redoc)

---

## 🔗 API Endpoints

### **1. Root Endpoint**

- **URL:** `/`
- **Method:** `GET`
- **Description:** Returns a welcome message.

#### Response:

```json
{
  "message": "Welcome to the Text Generation API!"
}
```

---

### **2. Generate Text**

- **URL:** `/generate`
- **Method:** `POST`
- **Description:** Generates text based on a given prompt and parameters.

#### Request Body:

```json
{
  "prompt": "Once upon a time",
  "max_length": 50,
  "temperature": 0.8,
  "top_p": 0.9
}
```

#### Response:

```json
{
  "generated_text": "Once upon a time, there was a beautiful princess who lived in a magical castle..."
}
```

---

### **3. View History**

- **URL:** `/history`
- **Method:** `GET`
- **Description:** Retrieves the history of prompts and generated texts.

#### Response:

```json
{
  "history": [
    {
      "id": 1,
      "prompt": "Hello world",
      "generated_text": "Hello world! This is a generated message by GPT-2."
    },
    {
      "id": 2,
      "prompt": "Tell me a joke",
      "generated_text": "Why did the chicken cross the road? To get to the other side!"
    }
  ]
}
```

---

## ⚙️ Configuration

### Generation Parameters

You can customize the following parameters in the `/generate` endpoint:

- ``: Maximum length of the generated text (default: 50).
- ``: Controls randomness; lower values make the text more deterministic (default: 1.0).
- ``: Nucleus sampling probability; keeps only the most likely words (default: 0.9).

---

## 📃 Database

- The SQLite database (`history.db`) is automatically created when the app starts.
- It stores the following data:
  - ``: Auto-incrementing ID.
  - ``: The user-provided input prompt.
  - ``: The text generated by GPT-2.

### Managing the Database

To view or debug the database:

```bash
sqlite3 history.db
```

Run queries like:

```sql
SELECT * FROM history;
```

---

## 📖 Technologies Used

- **FastAPI:** For building the RESTful API.
- **Hugging Face Transformers:** For integrating GPT-2 text generation.
- **SQLite:** For lightweight and persistent data storage.
- **Uvicorn:** For running the FastAPI server.

---

## 🤔 Known Issues

- The generated text may sometimes repeat or include the input prompt. This can be handled with advanced prompt engineering or fine-tuning.

---